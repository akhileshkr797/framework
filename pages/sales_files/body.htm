<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0047)http://192.168.1.8:8080/wade6/jsp/home/body.jsp -->
<HTML><HEAD><META content="IE=5.0000" http-equiv="X-UA-Compatible">
 
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><LINK 
href="body_files/platinum.css" rel="STYLESHEET" type="text/css"> <LINK href="body_files/lobibox.css" 
rel="stylesheet"> <LINK href="body_files/body.css" rel="STYLESHEET" type="text/css"> 

<SCRIPT src="body_files/jquery.js"></SCRIPT>
 
<SCRIPT src="body_files/lobibox.min.js"></SCRIPT>
 <LINK href="body_files/sweetalert.css" rel="stylesheet"> 
<SCRIPT src="body_files/sweetalert.min.js"></SCRIPT>
 
<SCRIPT>
$(document).ready(function(){
	/*
	Lobibox.notify('info',{
		 sound: false,
		 icon: false,
		 size: 'mini',
		 title:'OHM Alert',
		 msg:'This is a test message'
	  });  
	  */
	 // alert("Request scheme = "+request.getScheme());
});

var selectSocket = "http";
if(selectSocket=="http") {
	var webSocket = new WebSocket('ws://' + window.location.host + '/wade6/wade/gbs');
}
else {
	var webSocket = new WebSocket('wss://' + window.location.host + '/wade6/wade/gbs');
}

webSocket.onerror = function(event) {
	onError(event)
};

webSocket.onopen = function(event) {
	onOpen(event)
};

webSocket.onmessage = function(event) {
	onMessage(event)
};

function onMessage(event) {			
	var temp =event.data;			
	Lobibox.notify('info',{
		 sound: false,
		 icon: false,
		 size: 'mini',
		 delay: 5000,  
		 title:'OHM Alert',
		 msg:temp
	  });	 
	 top.glow=1;
	 top.title.glowBulb();	 
}

function onOpen(event) {
	var temp='Connected as gbs';	
/*
	Lobibox.notify('info',{
		 sound: false,
		 icon: false,
		 size: 'mini',
		 title:'OHM Alert',
		 msg:temp
	  });  
	*/
}

function onError(event) {
	alert(event.data);
}

function start() {
	webSocket.send('hello');
	return false;
}
//----------------Functions for session Time Out---------------------
	var alertwindow;
	function caltimeout(){
		top.g_IdleTime=top.g_IdleTime+1;
		//uncomment the following line for testing purpose
		//top.content.alert("[ IDLE TIME : "+top.g_IdleTime+" ]"+ top.g_TimeOut);	
		if ((top.g_TimeOut-top.g_IdleTime)==top.g_WarnTime ){
			Lobibox.notify('error',{
			 sound: false,
			 icon: false,
			 size: 'mini',
			 title:'OHM Alert',
			 msg:"Your Session will expire in "+ top.g_WarnTime + " Minutes<br>Please invoke a function to stay connected"
		  });
		}	
		if (top.g_TimeOut==top.g_IdleTime){			
			 
			alertwindow=         window.open("","Ohmalert","width=200,height=80,resizable=no,menubar=0");
			alertwindow.document.writeln("<html><title>OHM Alert - Session Expired</title><body bgcolor='#D5D2D5'>");
			alertwindow.document.writeln("<table width='100%' valign='middle' border='0' cellspacing='0' cellpadding='3'>");
			alertwindow.document.writeln("  <tr><td align='center'><b><font face='Verdana' size='1'>Your Session has expired and you have been logged out</font></b></td>");
			alertwindow.document.writeln("  </tr><tr><td>&nbsp;</td>");
			alertwindow.document.writeln("  </tr><tr>");
			alertwindow.document.writeln("    <td align='center'><input type='button' style='font-family: Verdana; font-size: 8pt; font-weight: bold' value='Close' onClick='window.close()'></td>");
			alertwindow.document.writeln(" </tr></table>");
			alertwindow.document.writeln("</body></html>");	
			top.location.href = top.applURL + "/jsp/login/logout.jsp";	
			clearInterval(sessionhandler);
		}	
	}
	function starttimer(){
		//a=setInterval(function name,milliSeconds(1 second=1000 millisec);
		sessionhandler=setInterval(caltimeout,1000*60);
	}
</SCRIPT>
 
<META name="GENERATOR" content="MSHTML 11.00.10570.1001"></HEAD> 
<BODY onload="starttimer()">
<TABLE width="100%" height="100%" class="body_border" id="tblBody" border="0" 
cellspacing="0" cellpadding="0">
  <TBODY>
  <TR>
    <TD width="100%" height="100%" valign="top"><IFRAME name="menuFrame" 
      width="100%" height="100%" id="leftpane" src="body_files/menu_left.htm" 
      frameborder="0" noresize=""></IFRAME>		  		  </TD>
    <TD width="1" height="100%" valign="top"><IFRAME name="bodyFrame" width="100%" 
      height="100%" id="rightpane" src="body_files/gk.htm" frameborder="0" 
      noresize=""></IFRAME>		   </TD></TR></TBODY></TABLE></BODY></HTML>
